<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Smart Quiz</title>

<style>
:root{
  --primary:#6366f1;
  --secondary:#22c55e;
  --danger:#ef4444;
  --bg1:#8b5cf6;
  --bg2:#3b82f6;
}

body{
  font-family:'Segoe UI',Arial,sans-serif;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  padding:20px;
  min-height:100vh;
}

.container{
  max-width:800px;
  margin:auto;
  background:#ffffff;
  padding:28px;
  border-radius:20px;
  box-shadow:0 25px 50px rgba(0,0,0,.2);
}

h1{
  text-align:center;
  background:linear-gradient(90deg,#6366f1,#22c55e);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.top-bar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-weight:600;
  margin-bottom:15px;
}

.progress{
  height:8px;
  background:#e5e7eb;
  border-radius:999px;
  overflow:hidden;
  margin-bottom:20px;
}

.progress-bar{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#22c55e,#3b82f6);
  transition:0.3s;
}

.question-box{
  background:linear-gradient(135deg,#eef2ff,#f0fdf4);
  padding:22px;
  border-radius:16px;
  margin-bottom:20px;
  font-size:18px;
}

.options{
  display:flex;
  gap:14px;
  flex-wrap:wrap;
}

.option{
  flex:1;
  min-width:140px;
  padding:16px;
  text-align:center;
  border-radius:14px;
  cursor:pointer;
  font-weight:600;
  color:#1f2937;
  background:#f8fafc;
  border:3px solid transparent;
  transition:0.25s;
}

.option:hover{
  transform:translateY(-2px) scale(1.02);
  box-shadow:0 10px 20px rgba(0,0,0,.1);
}

.option.correct{
  background:linear-gradient(135deg,#bbf7d0,#4ade80);
  color:#064e3b;
}

.option.wrong{
  background:linear-gradient(135deg,#fecaca,#f87171);
  color:#7f1d1d;
}

.hidden{display:none;}

.result{
  text-align:center;
  font-size:20px;
  margin-top:20px;
}
</style>
</head>

<body>
<div class="container">

<h1>üß† Smart Quiz</h1>

<div id="teacher">
<textarea id="input" rows="6"
placeholder="–°“±—Ä–∞“õ | *–¥“±—Ä—ã—Å | –≤–∞—Ä–∏–∞–Ω—Ç2 | –≤–∞—Ä–∏–∞–Ω—Ç3 | –≤–∞—Ä–∏–∞–Ω—Ç4"></textarea>
<button onclick="startQuiz()" style="
  margin-top:12px;
  width:100%;
  padding:14px;
  font-size:16px;
  border:none;
  border-radius:14px;
  cursor:pointer;
  background:linear-gradient(90deg,#6366f1,#22c55e);
  color:#fff;
">‚ñ∂ –ë–∞—Å—Ç–∞—É</button>
</div>

<div id="quiz" class="hidden">

  <div class="top-bar">
    <div id="counter"></div>
    <div id="timer"></div>
  </div>

  <div class="progress">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <div class="question-box" id="question"></div>
  <div class="options" id="options"></div>

</div>

<div id="result" class="result hidden"></div>

</div>

<script>
let quiz=[];
let index=0;
let score=0;
let startTime;

function shuffle(arr){
  return arr.sort(()=>Math.random()-0.5);
}

function startQuiz(){
  const lines=document.getElementById('input').value.trim().split('\n');

  quiz=shuffle(lines.map(l=>{
    const p=l.split('|').map(x=>x.trim());
    return{
      q:p[0],
      correct:p.find(x=>x.startsWith('*')).replace('*',''),
      options:p.slice(1).map(x=>x.replace('*',''))
    }
  }));

  index=0;
  score=0;
  startTime=Date.now();

  document.getElementById('teacher').classList.add('hidden');
  document.getElementById('quiz').classList.remove('hidden');
  showQuestion();
}

function showQuestion(){
  document.getElementById('counter').innerText=
    `–°“±—Ä–∞“õ ${index+1} / ${quiz.length}`;

  document.getElementById('timer').innerText=
    `‚è± ${Math.floor((Date.now()-startTime)/1000)} c`;

  document.getElementById('progressBar').style.width=
    `${(index/quiz.length)*100}%`;

  const q=quiz[index];
  document.getElementById('question').innerHTML=`<b>${q.q}</b>`;

  const opts=shuffle([...q.options]);
  const box=document.getElementById('options');
  box.innerHTML='';

  opts.forEach(o=>{
    const d=document.createElement('div');
    d.className='option';
    d.innerText=o;
    d.onclick=()=>selectAnswer(d,o);
    box.appendChild(d);
  });
}

function selectAnswer(div,answer){
  const q=quiz[index];
  const options=document.querySelectorAll('.option');

  options.forEach(o=>{
    o.onclick=null;
    if(o.innerText===q.correct) o.classList.add('correct');
  });

  if(answer===q.correct){
    div.classList.add('correct');
    score++;
  }else{
    div.classList.add('wrong');
  }

  setTimeout(()=>{
    index++;
    if(index<quiz.length) showQuestion();
    else finishQuiz();
  },900);
}

function finishQuiz(){
  document.getElementById('quiz').classList.add('hidden');

  const time=Math.floor((Date.now()-startTime)/1000);
  const percent=Math.round(score/quiz.length*100);

  document.getElementById('result').classList.remove('hidden');
  document.getElementById('result').innerHTML=
    `üéâ –¢–µ—Å—Ç –∞—è“õ—Ç–∞–ª–¥—ã!<br><br>
     ‚úÖ –î“±—Ä—ã—Å –∂–∞—É–∞–ø: <b>${score}</b> / ${quiz.length}<br>
     üìä –ü–∞–π—ã–∑: <b>${percent}%</b><br>
     ‚è± –£–∞“õ—ã—Ç: <b>${time} —Å–µ–∫</b>`;
}
</script>

</body>
</html>