<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Smart Quiz</title>

<style>
body{
  font-family:'Segoe UI',Arial,sans-serif;
  background:linear-gradient(120deg,#e0e7ff,#f8fafc);
  padding:20px;
}

.container{
  max-width:800px;
  margin:auto;
  background:#fff;
  padding:25px;
  border-radius:16px;
  box-shadow:0 20px 40px rgba(0,0,0,.1);
}

h1{text-align:center;}

.top-bar{
  display:flex;
  justify-content:space-between;
  font-weight:600;
  margin-bottom:20px;
}

.question-box{
  background:#f1f5f9;
  padding:20px;
  border-radius:14px;
  margin-bottom:20px;
}

.options{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
}

.option{
  flex:1;
  min-width:120px;
  padding:14px;
  text-align:center;
  border-radius:12px;
  cursor:pointer;
  border:2px solid #e2e8f0;
  transition:.2s;
}

.option:hover{
  background:#f8fafc;
}

.option.correct{
  background:#dcfce7;
  border-color:#22c55e;
  color:#14532d;
}

.option.wrong{
  background:#fee2e2;
  border-color:#ef4444;
  color:#7f1d1d;
}

.hidden{display:none;}

.result{
  text-align:center;
  font-size:18px;
  margin-top:20px;
}
</style>
</head>

<body>
<div class="container">

<h1>üß† Smart Quiz</h1>

<div id="teacher">
<textarea id="input" rows="6"
placeholder="–°“±—Ä–∞“õ | *–¥“±—Ä—ã—Å | –≤–∞—Ä–∏–∞–Ω—Ç2 | –≤–∞—Ä–∏–∞–Ω—Ç3 | –≤–∞—Ä–∏–∞–Ω—Ç4"></textarea>
<button onclick="startQuiz()">‚ñ∂ –ë–∞—Å—Ç–∞—É</button>
</div>

<div id="quiz" class="hidden">
  <div class="top-bar">
    <div id="counter"></div>
    <div id="timer"></div>
  </div>

  <div class="question-box" id="question"></div>
  <div class="options" id="options"></div>
</div>

<div id="result" class="result hidden"></div>

</div>

<script>
let quiz=[];
let index=0;
let score=0;
let startTime;

function startQuiz(){
  const lines=document.getElementById('input').value.trim().split('\n');
  quiz=lines.map(l=>{
    const p=l.split('|').map(x=>x.trim());
    return{
      q:p[0],
      correct:p.find(x=>x.startsWith('*')).replace('*',''),
      options:p.slice(1).map(x=>x.replace('*',''))
    }
  });

  index=0;
  score=0;
  startTime=Date.now();

  document.getElementById('teacher').classList.add('hidden');
  document.getElementById('quiz').classList.remove('hidden');
  showQuestion();
}

function showQuestion(){
  document.getElementById('counter').innerText=
    `–°“±—Ä–∞“õ ${index+1} / ${quiz.length}`;

  document.getElementById('timer').innerText=
    `‚è± ${Math.floor((Date.now()-startTime)/1000)} c`;

  const q=quiz[index];
  document.getElementById('question').innerHTML=`<b>${q.q}</b>`;

  const opts=[...q.options].sort(()=>Math.random()-0.5);
  const box=document.getElementById('options');
  box.innerHTML='';

  opts.forEach(o=>{
    const d=document.createElement('div');
    d.className='option';
    d.innerText=o;
    d.onclick=()=>selectAnswer(d,o);
    box.appendChild(d);
  });
}

function selectAnswer(div,answer){
  const q=quiz[index];
  const options=document.querySelectorAll('.option');

  options.forEach(o=>{
    o.onclick=null;
    if(o.innerText===q.correct) o.classList.add('correct');
  });

  if(answer===q.correct){
    div.classList.add('correct');
    score++;
  }else{
    div.classList.add('wrong');
  }

  setTimeout(()=>{
    index++;
    if(index<quiz.length) showQuestion();
    else finishQuiz();
  },1000);
}

function finishQuiz(){
  document.getElementById('quiz').classList.add('hidden');
  const time=Math.floor((Date.now()-startTime)/1000);
  const percent=Math.round(score/quiz.length*100);

  document.getElementById('result').classList.remove('hidden');
  document.getElementById('result').innerHTML=
    `‚úÖ –î“±—Ä—ã—Å: <b>${score}</b> / ${quiz.length}<br>
     üìä –ü–∞–π—ã–∑: <b>${percent}%</b><br>
     ‚è± –£–∞“õ—ã—Ç: <b>${time} —Å–µ–∫</b>`;
}
</script>

</body>
</html>
